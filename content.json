{"meta":{"title":"nnz_spaceship","subtitle":"学不立志，如植木无根","description":"立志用功，如种树然。方其根芽，犹未有干；及其有干，尚未有枝；枝而后叶，叶而后花实。初种根时，只管栽培灌溉，勿作枝想，勿作叶想，勿作花想，勿作实想。悬想何益？但不忘栽培之功，怕没有枝叶花实？","author":"nnz","url":"http://nnz1412.cn","root":"/"},"pages":[{"title":"404","date":"2022-05-28T13:38:42.000Z","updated":"2022-05-28T13:39:06.592Z","comments":true,"path":"404/index.html","permalink":"http://nnz1412.cn/404/index.html","excerpt":"","text":""},{"title":"书单","date":"2022-06-11T11:35:53.295Z","updated":"2022-06-11T11:35:53.295Z","comments":false,"path":"books/index.html","permalink":"http://nnz1412.cn/books/index.html","excerpt":"","text":"douban: user: Sophomores # 豆瓣用户名 start: 0 # 从哪一条记录开始 count: 100 # 获取豆瓣书单数据条数"},{"title":"关于","date":"2022-05-28T12:03:51.000Z","updated":"2022-06-11T12:43:27.014Z","comments":true,"path":"about/index.html","permalink":"http://nnz1412.cn/about/index.html","excerpt":"","text":"{ name: ‘nnz’ age: 24, gender: ‘女’, profession: ‘Student’, address: ‘China Beijing’, education: ‘本科’, description: ‘战斗永不停歇’, }"},{"title":"categories","date":"2022-05-28T12:02:02.000Z","updated":"2022-05-28T12:02:33.725Z","comments":true,"path":"categories/index.html","permalink":"http://nnz1412.cn/categories/index.html","excerpt":"","text":""},{"title":"友情链接","date":"2022-06-11T11:28:57.467Z","updated":"2022-06-11T11:28:57.467Z","comments":true,"path":"links/index.html","permalink":"http://nnz1412.cn/links/index.html","excerpt":"","text":""},{"title":"friends","date":"2022-05-28T12:04:25.000Z","updated":"2022-05-28T12:04:53.280Z","comments":true,"path":"friends/index.html","permalink":"http://nnz1412.cn/friends/index.html","excerpt":"","text":""},{"title":"tags","date":"2022-05-28T12:03:04.000Z","updated":"2022-05-28T12:03:41.095Z","comments":true,"path":"tags/index.html","permalink":"http://nnz1412.cn/tags/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2022-06-11T11:34:24.878Z","updated":"2022-06-11T11:34:24.878Z","comments":false,"path":"repository/index.html","permalink":"http://nnz1412.cn/repository/index.html","excerpt":"","text":"Githubgithub: username: nzwg1412 # github username"}],"posts":[{"title":"PyTorch常用Tricks总结","slug":"PyTorch常用Tricks总结","date":"2022-05-28T12:53:28.122Z","updated":"2022-06-11T12:32:31.590Z","comments":true,"path":"2022/05/28/PyTorch常用Tricks总结/","link":"","permalink":"http://nnz1412.cn/2022/05/28/PyTorch%E5%B8%B8%E7%94%A8Tricks%E6%80%BB%E7%BB%93/","excerpt":"","text":"#python 目录：1 指定GPU编号2 查看模型每层输出详情3 梯度裁剪4 扩展单张图片维度5 独热编码6 防止验证模型时爆显存7 学习率衰减8 冻结某些层的参数9 对不同层使用不同学习率 2. 查看模型每层输出详情Keras有一个简洁的API来查看模型的每一层输出尺寸，这在调试网络时非常有用。现在在PyTorch中也可以实现这个功能。 使用很简单，如下用法： from torchsummary import summary summary(your_model, input_size=(channels, H, W)) input_size 是根据你自己的网络模型的输入尺寸进行设置。 3. 梯度裁剪（Gradient Clipping）import torch.nn as nn outputs = model(data) loss= loss_fn(outputs, target) optimizer.zero_grad() loss.backward() nn.utils.clip_grad_norm_(model.parameters(), max_norm=20, norm_type=2) optimizer.step() nn.utils.clip_grad_norm_ 的参数： parameters – 一个基于变量的迭代器，会进行梯度归一化 max_norm – 梯度的最大范数 norm_type – 规定范数的类型，默认为L2 知乎用户 @不椭的椭圆 提出：梯度裁剪在某些任务上会额外消耗大量的计算时间。 5. 独热编码 在PyTorch中使用交叉熵损失函数的时候会自动把label转化成onehot，所以不用手动转化，而使用MSE需要手动转化成onehot编码。 import torch class_num = 8 batch_size = 4 def one_hot(label): &quot;&quot;&quot; 将一维列表转换为独热编码 &quot;&quot;&quot; label = label.resize_(batch_size, 1) m_zeros = torch.zeros(batch_size, class_num) # 从 value 中取值，然后根据 dim 和 index 给相应位置赋值 onehot = m_zeros.scatter_(1, label, 1) # (dim,index,value) return onehot.numpy() # Tensor -&gt; Numpy label = torch.LongTensor(batch_size).random_() % class_num # 对随机数取余 print(one_hot(label)) # output: [[0. 0. 0. 1. 0. 0. 0. 0.] [0. 0. 0. 0. 1. 0. 0. 0.] [0. 0. 1. 0. 0. 0. 0. 0.] [0. 1. 0. 0. 0. 0. 0. 0.]] 7. 学习率衰减import torch.optim as optim from torch.optim import lr_scheduler # 训练前的初始化 optimizer = optim.Adam(net.parameters(), lr=0.001) scheduler = lr_scheduler.StepLR(optimizer, 10, 0.1) # # 每过10个epoch，学习率乘以0.1 # 训练过程中 for n in n_epoch: scheduler.step() ... 8. 冻结某些层的参数参考：Pytorch 冻结预训练模型的某一层https://www.zhihu.com/question/311095447/answer/589307812 在加载预训练模型的时候，我们有时想冻结前面几层，使其参数在训练过程中不发生变化。 我们需要先知道每一层的名字，通过如下代码打印： net = Network() # 获取自定义网络结构 for name, value in net.named_parameters(): print(&#39;name: &#123;0&#125;,\\t grad: &#123;1&#125;&#39;.format(name, value.requires_grad)) 假设前几层信息如下： name: cnn.VGG_16.convolution1_1.weight, grad: True name: cnn.VGG_16.convolution1_1.bias, grad: True name: cnn.VGG_16.convolution1_2.weight, grad: True name: cnn.VGG_16.convolution1_2.bias, grad: True name: cnn.VGG_16.convolution2_1.weight, grad: True name: cnn.VGG_16.convolution2_1.bias, grad: True name: cnn.VGG_16.convolution2_2.weight, grad: True name: cnn.VGG_16.convolution2_2.bias, grad: True 后面的True表示该层的参数可训练，然后我们定义一个要冻结的层的列表： no_grad = [ &#39;cnn.VGG_16.convolution1_1.weight&#39;, &#39;cnn.VGG_16.convolution1_1.bias&#39;, &#39;cnn.VGG_16.convolution1_2.weight&#39;, &#39;cnn.VGG_16.convolution1_2.bias&#39; ] 冻结方法如下： net = Net.CTPN() # 获取网络结构 for name, value in net.named_parameters(): if name in no_grad: value.requires_grad = False else: value.requires_grad = True 冻结后我们再打印每层的信息： name: cnn.VGG_16.convolution1_1.weight, grad: False name: cnn.VGG_16.convolution1_1.bias, grad: False name: cnn.VGG_16.convolution1_2.weight, grad: False name: cnn.VGG_16.convolution1_2.bias, grad: False name: cnn.VGG_16.convolution2_1.weight, grad: True name: cnn.VGG_16.convolution2_1.bias, grad: True name: cnn.VGG_16.convolution2_2.weight, grad: True name: cnn.VGG_16.convolution2_2.bias, grad: True 可以看到前两层的weight和bias的requires_grad都为False，表示它们不可训练。 最后在定义优化器时，只对requires_grad为True的层的参数进行更新。 optimizer = optim.Adam(filter(lambda p: p.requires_grad, net.parameters()), lr=0.01) 9. 对不同层使用不同学习率我们对模型的不同层使用不同的学习率。 还是使用这个模型作为例子： net = Network() # 获取自定义网络结构 for name, value in net.named_parameters(): print(&#39;name: &#123;&#125;&#39;.format(name)) # 输出： # name: cnn.VGG_16.convolution1_1.weight # name: cnn.VGG_16.convolution1_1.bias # name: cnn.VGG_16.convolution1_2.weight # name: cnn.VGG_16.convolution1_2.bias # name: cnn.VGG_16.convolution2_1.weight # name: cnn.VGG_16.convolution2_1.bias # name: cnn.VGG_16.convolution2_2.weight # name: cnn.VGG_16.convolution2_2.bias 对 convolution1 和 convolution2 设置不同的学习率，首先将它们分开，即放到不同的列表里： conv1_params = [] conv2_params = [] for name, parms in net.named_parameters(): if &quot;convolution1&quot; in name: conv1_params += [parms] else: conv2_params += [parms] # 然后在优化器中进行如下操作： optimizer = optim.Adam( [ &#123;&quot;params&quot;: conv1_params, &#39;lr&#39;: 0.01&#125;, &#123;&quot;params&quot;: conv2_params, &#39;lr&#39;: 0.001&#125;, ], weight_decay=1e-3, ) 我们将模型划分为两部分，存放到一个列表里，每部分就对应上面的一个字典，在字典里设置不同的学习率。当这两部分有相同的其他参数时，就将该参数放到列表外面作为全局参数，如上面的weight_decay。 也可以在列表外设置一个全局学习率，当各部分字典里设置了局部学习率时，就使用该学习率，否则就使用列表外的全局学习率。","categories":[{"name":"skill","slug":"skill","permalink":"http://nnz1412.cn/categories/skill/"}],"tags":[{"name":"python","slug":"python","permalink":"http://nnz1412.cn/tags/python/"},{"name":"Pytorch","slug":"Pytorch","permalink":"http://nnz1412.cn/tags/Pytorch/"}]},{"title":"","slug":"hello-world","date":"2022-05-23T09:19:46.277Z","updated":"2022-06-11T11:42:51.451Z","comments":true,"path":"2022/05/23/hello-world/","link":"","permalink":"http://nnz1412.cn/2022/05/23/hello-world/","excerpt":"","text":"title: welcome to hexocategories: websitetags: hexotoc: true # 是否启用内容索引 Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new \"My New Post\" More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"多级压裂水平井的储层质量评价和预测产量变化","slug":"多级压裂水平井的储层质量评价和预测产量变化","date":"1970-01-01T05:37:00.528Z","updated":"2022-05-28T12:58:02.676Z","comments":true,"path":"1970/01/01/多级压裂水平井的储层质量评价和预测产量变化/","link":"","permalink":"http://nnz1412.cn/1970/01/01/%E5%A4%9A%E7%BA%A7%E5%8E%8B%E8%A3%82%E6%B0%B4%E5%B9%B3%E4%BA%95%E7%9A%84%E5%82%A8%E5%B1%82%E8%B4%A8%E9%87%8F%E8%AF%84%E4%BB%B7%E5%92%8C%E9%A2%84%E6%B5%8B%E4%BA%A7%E9%87%8F%E5%8F%98%E5%8C%96/","excerpt":"","text":"title:: @Evaluation of Reservoir Quality and Forecasted Production Variability along a Multi-Fractured Horizontal Well. Part 1: Reservoir Characterization&#x2F; 评价多级压裂水平井的储层质量和预测产量变化。第 1 部分：储层表征 ((624a54af-3e22-4eec-bec0-dde65bcefeeb))Completion design for horizontal wells is typically performed using a geometric approachwhere the fracturing stages are evenly distributed along the lateral length of the well. However, thisapproach ignores the intrinsic vertical and horizontal heterogeneity of unconventional reservoirs,resulting in uneven production from hydraulic fracturing stages. An alternative approach is toselectively complete intervals with similar and superior reservoir quality (RQ) and completionquality (CQ), potentially leading to improved development efficiency. In the current study, along-well reservoir characterization is performed using data from a horizontal well completed in theMontney Formation in western Canada. Log-derived petrophysical and geomechanical properties,and laboratory analyses performed on drill cuttings, are integrated for the purpose of evaluating RQand CQ variability along the well. For RQ, cutoffs were applied to the porosity (&gt;4%), permeability(&gt;0.0018 mD), and water saturation (&lt;20%), whereas, for CQ, cutoffs were applied to rock strength(&lt;160 Mpa), Young’s Modulus (60–65 GPa), and Poisson’s ratio (&lt;0.26). Based on the observedheterogeneity in reservoir properties, the lateral length of the well can be subdivided into ninesegments. Superior RQ and CQ intervals were found to be associated with predominantly (massive)porous siltstone facies; these intervals are regarded as the primary targets for stimulation. In contrast,relatively inferior RQ and CQ intervals were found to be associated with either dolomite-cementedfacies or laminated siltstones. The methods developed and used in this study could be beneficialto Montney operators who aim to better predict and target sweet spots along horizontal wells; theapproach could also be used in other unconventional plays.翻译：水平井的完井设计通常使用几何方法进行，其中压裂阶段沿井的横向长度均匀分布。但该方法忽略了非常规储层固有的垂向和横向非均质性，导致水力压裂阶段产量不均。另一种方法是选择性地完成具有相似和优越储层质量 (RQ) 和完井质量 (CQ) 的层段，从而潜在地提高开发效率。在目前的研究中，使用加拿大西部蒙特尼组已完成水平井的数据进行沿井储层表征。为了评估沿井的 RQ 和 CQ 变异性，综合了测井衍生的岩石物理和地质力学特性以及钻屑的实验室分析。对于 RQ，截止值适用于孔隙度 (&gt;4%)、渗透率 (&gt;0.0018 mD) 和含水饱和度 (&lt;20%)，而对于 CQ，截止值适用于岩石强度 (&lt;160 Mpa)、杨氏模量 (60-65 GPa) 和泊松比 (&lt;0.26)。基于观察到的储层性质的非均质性，井的横向长度可以细分为九段。发现优越的 RQ 和 CQ 层段主要与（块状）多孔粉砂岩相有关；这些间隔被视为增产的主要目标。相比之下，相对较差的 RQ 和 CQ 层段被发现与白云岩胶结相或层状粉砂岩有关。本研究中开发和使用的方法可能对旨在更好地预测和瞄准水平井最佳位置的 Montney 作业人员有益；这种方法也可以用于其他非常规的戏剧。tags:: abstract ((624a645c-4fd8-4d17-bd10-7bfe4d632666))tags:: kw ((624a5af3-90ea-4726-bcb1-d24afe33243b))tags:: fig, f1, 钻屑, 井身轨迹用于本研究的数据集包括电缆测井、钻井衍生特性和沿针对 Montney 组中段的水平井的横向部分收集的岩屑样品。井轨迹显示沿水平井采集的钻屑样品分布。 绿点代表适合实验室分析的样本，而红点代表发现泥浆污染物含量超过岩石量的样本。 立体图像 (A-C) 是井轨迹中确定位置的钻屑示例。 (A-C) 中的黄色箭头表示聚合物珠粒（泥浆添加剂）。 （A-C）中的蓝色和橙色箭头分别代表粉砂岩和富有机质泥岩相。 ((624a5b4c-625c-40cd-b49d-b953ad3b4f57))tags:: table, t1, 岩心分析 岩石物理性质： 孔隙率 (φ) 由体积密度测井计算： $$\\phi&#x3D;(\\rho_{ma}-\\rho_b)&#x2F;(\\rho_{ma}−\\rho_f)$$ 其中$\\rho_{ma}$是为岩屑样品测量的平均晶粒密度 (2.71 g&#x2F;cm3),$\\rho_{b}$ 是地层体积密度 g&#x2F;cm3, $\\rho_f$是流体占据孔隙度的密度，假设为 1.0 g&#x2F;cm3。 渗透率和含水饱和度 $$k_{abs}&#x3D;0.00027×(\\phi)^{2.71913}$$ 其中 k_{abs} 是绝对渗透率 (mD)，φ 是孔隙度 (%) $$BVW&#x3D;6.7627× (R_t)^{−0.507}$$ 其中 BVW 为束缚水 (%)，Rt 为深电阻率 (Ω·m) $$S_w&#x3D;100×(BVW&#x2F;\\phi)$$ 其中Sw 含水饱和度 (%)，BVW 为束缚水（%），φ是孔隙率（%）。 ((624a5e37-9f26-4da2-a9dc-7e24f914873c))tags:: fig, f2,本研究中使用来自 Montney 垂直参考井的伽马射线测井来约束水平井的基于测井的计算和实验室结果。 左侧面板中的阴影矩形表示水平井穿过的估计间隔。 核心图片 (A,D)、薄片图像 (B,E) 和 SEM 图像 (C,F) 代表水平井遇到的岩石示例。 Davies 等人的岩石地层框架。 [20]。 地质力学特性:动态弹性常数、泊松比 (PR) 和杨氏模量 (YM) 是使用体积密度测井 ($\\rho_b$)、剪切 (DTS) 和压缩 (DTC) 声波测井 (μs&#x2F;ft) 以及以下等式确定的 $$PR&#x3D;\\frac{[1&#x2F;2×(DTS&#x2F;DTC)^2−1]}{[(DTS&#x2F;DTC)^2−1]}$$ $$YM&#x3D;[2×\\rho_b×(1+PR)]&#x2F;(DTC^2) $$ 无侧限抗压强度 (UCS) 是通过 McNally [24] 相关性使用压缩 (DTC) 声波测井计算的，其中 UCS 的单位是 MPa，DTC 的单位是μs&#x2F;ft id:: 624a5f8a-1356-4441-8aa4-af40b192e7ac$$UCS&#x3D;1200e^{(-0.0361×DTC)}$$ McNally 方程是针对数百个岩心样品进行校准的，这些样品的岩性主要是层状粉砂岩和砂岩 [24]。 考虑到 Montney 组的整体岩性为粉砂岩，因此认为 McNally 方程适用于本研究。 机械比能（MSE）测井使用高分辨率（10 s）钻井数据计算 $$MSE&#x3D;(\\frac{WOB}{Area_{bit}})+\\frac{120×\\pi×RPM_{bit}×T_{bit}}{Areabit×ROP}+HSE$$ WOB是以lb为单位的钻头重量 Area_{bit}是钻头的横截面积，$in^2$ RPM_{bit}是钻头的转速 T_{bit}是钻头的可用扭矩，lbf-ft ROP是以英尺&#x2F;小时为单位的渗透率，the rate of penetration HSE是hydraulic specific energy, 单位为 psi 。 WOB 和 T_{bit} 针对能量损失（即摩擦和振动）以及来自井下泥浆马达的额外能量进行了校正。 RPM_{bit} 根据泥浆马达校正的 。 使用测井计算岩石物理和地质力学特性后，在5米的滑动窗口上应用高斯平滑滤波器对连续曲线进行平滑处理。 在本研究的第 2 部分中使用每个压裂阶段的大致长度的对数计算属性的平均值 ((624a61a5-5fea-4c79-8262-c560025e2041))tags:: fig, f3, 计算结果岩石物理性质、地质力学性质与钻井计算参数结果展示 ((624a6228-3aba-400f-be5f-94b6b04d02ad))tags:: fig, f7, 岩性分析 ((624a6251-9e58-4f30-8d74-5cc8f8ec3de8))tags:: table, t2对沿井确定的九个段的测井计算的岩石物理和地质力学特性的总结。 括号中的数字是范围（min-max），括号下面的数字是段的平均值。 ((624a6281-4ceb-4540-89f1-c146622bf4bc))tags:: fig, f10, 对比 ((624a62a0-e005-4b3c-aa5d-da9ef991ab89))tags:: fig, f11, 岩石类型 ((624a6315-ba38-490e-8ace-3e2811266879))tags:: conclusionIn this study, it is demonstrated that key reservoir properties of the Montney Forma-tion significantly change at the meter-scale along the lateral length of horizontal wells.The integration of log-derived rock properties and drill cuttings analyses resulted in thefollowing findings: Petrophysical and geomechanical properties calculated from well logs served to identify and group “similar-rock” intervals along the well. Based on the observed heterogeneity in reservoir properties, the lateral length of the well was subdivided into nine segments, which displayed variable RQ and CQ. For the identification of “sweet spots” for stimulation, a set of RQ and CQ cutoff-based values were determined by considering the overall variations of petrophysical and geomechanical properties along the lateral (2524 m). Superior RQ and CQ intervals were found to be associated with predominantly massive-porous siltstone facies; these intervals are regarded as the primary targets for stimulation. In contrast, relatively inferior RQ and CQ intervals were found to be associated with either dolomite-cemented facies or laminated siltstones. The potential of drill cuttings to produce reliable reservoir data that can be tied to core-measured rock properties, including rock composition, petrophysical properties, and even rock types, has been demonstrated. Contrary to other unconventional plays, in the Montney, the gamma ray log is not representative of the log-calculated petrophysical or geomechanical properties. This fact underscores the need to combine multiple well logs or integrate additional datasets, such as drill cuttings and drilling-derived properties, to improve the along-well characterization. The evaluation and quantification of lithological and rock fabric variations on drill cutting samples—while drilling—could be of great importance to the optimization of hydraulic fracture stimulation treatments, particularly in formations where the mineralogy is not strongly indicative of RQ as in the Montney. Drill cuttings are naturally an imperfect dataset; the impact of several factors (e.g., particle size, DBM, etc.) on the different laboratory analyses should be recognized and accounted for. 翻译：本研究表明，Montney 组的关键储层特性沿水平井的横向长度在米尺度上发生显着变化。测井衍生的岩石特性和钻屑分析的整合导致以下发现：根据测井记录计算的岩石物理和地质力学特性用于识别和分组沿井的“相似岩石”层段。基于观察到的储层性质的非均质性，将井的横向长度细分为九段，显示出可变的 RQ 和 CQ。•为了识别增产的“甜点”，一组基于 RQ 和 CQ 截止值的值由下式确定考虑沿横向（2524 m）的岩石物理和地质力学性质的整体变化。发现优越的 RQ 和 CQ 层段与主要是块孔粉砂岩相有关；这些间隔被认为是增产的主要目标。相比之下，相对较差的 RQ 和 CQ 层段被发现与白云岩胶结相或层状粉砂岩有关。•钻屑产生可靠储层数据的潜力，这些数据可以与岩芯测量的岩石特性相关联，包括岩石成分、岩石物理特性，甚至岩石类型，都得到了证实。•与其他非常规的成藏区相反，在蒙特尼，伽马射线测井并不代表测井计算的岩石物理或地质力学特性。这一事实强调了合并多个测井或整合附加测井的必要性。 - 钻屑和钻井衍生特性等数据集，以改进沿井表征。•随钻钻屑样品岩性和岩石结构变化的评估和量化对于优化水力压裂增产具有重要意义处理，特别是在矿物并不像在 Montney 中那样强烈指示 RQ。•钻屑自然是一个不完美的数据集；应认识到并考虑几个因素（例如，粒度、DBM 等）对不同实验室分析的影响。","categories":[{"name":"Readings","slug":"Readings","permalink":"http://nnz1412.cn/categories/Readings/"}],"tags":[{"name":"Readings","slug":"Readings","permalink":"http://nnz1412.cn/tags/Readings/"},{"name":"Forecast","slug":"Forecast","permalink":"http://nnz1412.cn/tags/Forecast/"}],"author":"李丽哲"}],"categories":[{"name":"skill","slug":"skill","permalink":"http://nnz1412.cn/categories/skill/"},{"name":"Readings","slug":"Readings","permalink":"http://nnz1412.cn/categories/Readings/"}],"tags":[{"name":"python","slug":"python","permalink":"http://nnz1412.cn/tags/python/"},{"name":"Pytorch","slug":"Pytorch","permalink":"http://nnz1412.cn/tags/Pytorch/"},{"name":"Readings","slug":"Readings","permalink":"http://nnz1412.cn/tags/Readings/"},{"name":"Forecast","slug":"Forecast","permalink":"http://nnz1412.cn/tags/Forecast/"}]}